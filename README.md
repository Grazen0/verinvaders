# VerInvaders

A Space Invaders hardware clone in Verilog, with support for a NES Classic Mini
Controller and audio output. Has been tested on a Digilent Basys 3 board.

<img src="https://codeberg.org/Grazen0/verinvaders/raw/branch/main/docs/demo.jpeg" alt="Demo" height="480" />

## Usage

### Simulation

This project is made to be simulated with Icarus Verilog. You'll need the
following dependencies:

- `iverilog`
- `xxd`
- `gtkwave`

You can run a particular testbench within the `tb/` directory with the following
command:

```bash
make run TB=<testbench>
```

For example, `make run TB=cpm_tb` will run the testbench at `tb/cpm_tb.v`, which
will run the Microcosm Diagnostic program on the project's Intel 8080 clone.

Similarly, you can run and view the waveform generated by a testbench with the
following command:

```bash
make wave TB=<testbench>
```

### Synthesis

This project is to be synthesized with Vivado. The top module is, surprisingly
enough, [`top.v`][top_module].

The pin connections used on the board are as follows:

- `JA1`: NES Classic Mini Controller SCLK.
- `JA2`: NES Classic Mini Controller SDA.
- `JA3`: Digital audio output (PWM).

You may connect these outputs as you see fit. I personally have my circuitry set
up like the following picture:

<img src="https://codeberg.org/Grazen0/verinvaders/raw/branch/main/docs/circuit.jpeg" alt="Circuit picture" height="420" />

## Notes

The CPU is in dire need of refactoring (perhaps with microcode) due to currently
having a gargantuan control unit of ~900 lines of hardwired (and perhaps badly
written) control logic.

[top_module]: https://codeberg.org/Grazen0/verinvaders/src/branch/main/src/top.v
